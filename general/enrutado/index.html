<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Enrutado URI - DBAX</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Enrutado URI";
    var mkdocs_page_input_path = "general\enrutado.md";
    var mkdocs_page_url = "/general/enrutado/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DBAX</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Índice</a>
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../welcome/">Bienvenido a DBAX</a>
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../why/">¿Por qué DBAX?</a>
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Introdcción</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/empezando/">Empezando</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/a-simple-vista/">DBAX a simple vista</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/funciones-soportadas/">Funciones soportadas</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/arquitectura/">Arquitectura DBAX</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/diagrama-flujo/">Diagrama de flujo</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/mvc/">Model-Vista-Controlador</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/buenas-practivas-mvc/">Buenas prácticas MVC</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/conceptos-aplicaciones/">Conceptos aplicaciones</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/objetivos-arquitectura/">Objetivos de arquitectura</a>
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Instalación</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/descarga/">Descargar DBAX</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../install/install/">Instrucciones de instalación</a>
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorial</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/que-necesito/">¿Que necesito?</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/primera-pagina/">Su primera página</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/util/">Algo util</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/formularios/">Formularios</a>
    </li>

        
            
    <ul class="subnav">
    <li><span>Aplicación básica noticias</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/app/crear-aplicacion/">Crear aplicación</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/app/noticias/">Sección noticias</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/app/crear-noticia/">Crear noticia</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorial/app/conclusion/">Conclusión</a>
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Consola Web</span></li>

        
            
    <ul class="subnav">
    <li><span>Aplicaciones</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../console/apps/">Aplicaciones</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../console/nueva-app/">Crear aplicación</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../console/ajustes/">Ajustes</a>
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../console/seguridad/">Seguridad</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../console/monit/">Monitorización</a>
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Temas Generales</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../urls/">DBAX URLs</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../controladores/">Controladores</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../vistas/">Vistas</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../modelos/">Modelos</a>
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Enrutado URI</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../excepciones/">Gestión de Excepciones</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../seguridad/">Seguridad</a>
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Referencias del lenguaje</span></li>

        
            
    <ul class="subnav">
    <li><span>Sintaxis básica</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/syntax/etiquetas-dbax/">Etiquetas de DBAX</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/syntax/salir-html/">Salir de HTML</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/syntax/separar-instrucciones/">Separación de instrucciones</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/syntax/comentarios/">Comentarios</a>
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Variables</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/variables/basico/">Conceptos básicos</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/variables/predefinidas/">Variables Predefinidas</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/variables/ambito/">Ámbito de las variables</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/variables/externas/">Variables desde fuentes externas</a>
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Variables predefinidas</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/reserved/dbax_core/">dbax_core</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/reserved/dbax_cookie/">dbax_cookie</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/reserved/dbax_exception/">dbax_exception</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/reserved/dbax_session/">dbax_session</a>
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Referencia APIs</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_cookie/">DBAX_COOKIE</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_core/">DBAX_CORE</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_datatable/">DBAX_DATATABLE</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_document/">DBAX_DOCUMENT</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_exception/">DBAX_EXCEPTION</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_file_parser/">DBAX_FILE_PARSER</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_ldap/">DBAX_LDAP</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_log/">DBAX_LOG</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_security/">DBAX_SECURITY</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_session/">DBAX_SESSION</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/dbax_utils/">DBAX_UTILS</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/json_util/">JSON_UTIL</a>
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/xlsx_builder/">XLSX_BUILDER</a>
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DBAX</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Temas Generales &raquo;</li>
        
      
    
    <li>Enrutado URI</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p class="page-header1"><b>Enrutado URI</b></p>

<p>El enrutamiento es el proceso que recupera una URI final (o endpoint, que ess la parte de la URI que viene después del <code>base_path</code>) y descomponerla en parámetros para determinar qué módulo, controlador y acción del controlador  debe recibir la solicitud.</p>
<p>Tiene sentido que haya una relación de uno a uno entre una cadena de URL y su controlador correspondiente. Los segmentos en una URI normalmente siguen este patrón:</p>
<pre><code>example.com/dbax/!appid?p=/controlador/id
</code></pre>
<p>De todas formas, en DBAX hay que asignar esta relación de manera que una controlador puede ser llamado en lugar de la correspondiente a la URL.</p>
<p>Por ejemplo, digamos que usted quiere que sus URLs tengan este prototipo:</p>
<pre><code>example.com/dbax/!appid?p=/product/1/
example.com/dbax/!appid?p=/product/2/
example.com/dbax/!appid?p=/product/3/
example.com/dbax/!appid?p=/product/4/
</code></pre>
<p>Los dos primeros segmentos de la URI son fijos por cada aplicación y el enrutado de DBAX tendrá en cuenta los segmentos desde <code>?p=*</code>. </p>
<h2 id="estableciendo-sus-reglas-de-enrutamiento">Estableciendo sus reglas de enrutamiento<a class="headerlink" href="#estableciendo-sus-reglas-de-enrutamiento" title="Permanent link">&para;</a></h2>
<p>Las reglas de enrutamiento se definen en la pestaña de <code>Routing</code> dentro de las opciones de una aplicación en la consola web de DBAX.</p>
<p>El enrutado se puede especificar utilizando comodines (Wildcards) o expresiones regulares.</p>
<h4 id="comodines">Comodines<a class="headerlink" href="#comodines" title="Permanent link">&para;</a></h4>
<p>Una ruta comodín típico podría ser algo como esto:</p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>product/[[:digit:]]+</code></td>
<td>pk_c_dbax_app.product_lookup</td>
</tr>
</tbody>
</table>
<p>El <em>URL Pattern</em> o Patron de URL contiene la URL que llega desde el usuario (a partir de <code>?p=</code>) mientras que en <em>Controller Method or View</em> indicamos el desitino que se ha enrutado para esta peticion. </p>
<p>En el segun ejemplo, si la palabra literal &ldquo;product&rdquo; se encuentra en el primer segmento de la URL, y un número se encuentra en el segundo segmento, el controlador &ldquo;pk_c_dbax_app&rdquo; el método &ldquo;product_lookup&rdquo; serán invocados.</p>
<p>En lugar de <code>[[:digit:]]+</code> podriamos haber hecho coincidir un literal concreto o podriamos haber utilizado algun otro tipo de comodín. </p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Las rutas se ejecutarán en el orden en que se definen. Las rutas superiores siempre tendrán prioridad sobre los inferiores. La posición se pede alterar desde la pestaña de Routing arrastrando una ruta a un nivel superior. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Los comodines son respetan el estandar POSIX que define las expresiones regulares. Se pueden usar estas clases que facilitan algunas tareas como la seleccion de digitos o texto alfabético. La lista de las cases POSIX la puede encontrar en: <a href="http://pubs.opengroup.org/onlinepubs/007908799/xbd/re.html">http://pubs.opengroup.org/onlinepubs/007908799/xbd/re.html</a></p>
</div>
<h3 id="ejemplos">Ejemplos<a class="headerlink" href="#ejemplos" title="Permanent link">&para;</a></h3>
<p>Aquí hay algunos ejemplos de enrutamiento:</p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>journals</code></td>
<td>pk_c_dbax_app.blogs</td>
</tr>
</tbody>
</table>
<p>Una URL que contengan la palabra <code>journals</code> en el primer segmento se reasigna al controlador <code>pk_c_dbax_app.blogs</code>.</p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>blog/joe</code></td>
<td>pk_c_dbax_app.blogs_by_user/34</td>
</tr>
</tbody>
</table>
<p>Una URL que contiene los segmentos <code>blog/joe</code> se asigna al controlador <code>pk_c_dbax_app.blogs_by_user</code> pasandole como parámetro el ID del usuario &ldquo;34&rdquo;.</p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>product/[[:print:]]+</code></td>
<td>pk_c_dbax_app.products_lookup</td>
</tr>
</tbody>
</table>
<p>Una URL con el &ldquo;product&rdquo; en el primer segmento, y cualquier cosa en la segunda se asigna al controlador <code>pk_c_dbax_app.products_lookup</code></p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>product/([[:digit:]]+)</code></td>
<td>pk_c_dbax_app.products_lookup_by_id/\1</td>
</tr>
</tbody>
</table>
<p>Una URL con el &ldquo;product&rdquo; en el primer segmento, y un número en el segundo se asigna a al controlador <code>pk_c_dbax_app.products_lookup_by_id</code> al cual se le pasa como parámetro el id de producto que ha coincidido en el patron.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>No utilice las barras de inicio ni de fin en <code>URL Pattern</code> .</p>
</div>
<h3 id="expresiones-regulares">Expresiones regulares<a class="headerlink" href="#expresiones-regulares" title="Permanent link">&para;</a></h3>
<p>Como observa, se usan de expresiones regulares para definir las reglas de enrutamiento. Se permite cualquier expresión regular válida. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DBAX usa la libreria <code>REGEX_REPLACE</code> de Oracle para realizar el enrutado. Para mas información <a href="http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm">http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm</a></p>
</div>
<p>Unos ejemplos de expresiones regulares típicos podría ser algo como esto:</p>
<table>
<thead>
<tr>
<th>URL Pattern</th>
<th>Controller Method or View</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>products/([a-z]+)/(\d+)</code></td>
<td>pk_c_dbax_app.\1/\2</td>
</tr>
</tbody>
</table>
<p>En el ejemplo anterior, un URI como <code>products/camisas/123</code> invocaría al controlador <code>pk_c_dbax_app.camisas</code> pasandole como parámetro <code>123</code>.</p>
<p>Con las expresiones regulares, también se puede coger varios segmentos a la vez. Por ejemplo, si un usuario accede a una zona protegida por contraseña de su aplicación web y desea ser capaz de redirigir de nuevo a la misma página después de que se conecte, puede encontrar este ejemplo útil:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Puede mezclar y combinar los comodines y las expresiones regulares.</p>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../excepciones/" class="btn btn-neutral float-right" title="Gestión de Excepciones">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../modelos/" class="btn btn-neutral" title="Modelos"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../modelos/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../excepciones/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
