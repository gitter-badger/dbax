<%
    dbax_core.g$var('page_head') := '        
    <!-- SweetAlert 2-->     
    <link href="${resources_url}/plugins/sweetalert2/sweetalert2.css" rel="stylesheet" type="text/css" />
    
    <!--Footable -->
    <link href="${resources_url}/plugins/footable/css/footable.core.css" rel="stylesheet" type="text/css"/>
    
    <style type="text/css">
        th, td { white-space: nowrap; }        
    </style>        
    ';
%>
<%@ include(header) %>

<!-- SideBar -->
<?dbax dbax_core.include('sidebar');?> 

   
 <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
            Manage Applications            
          </h1>
          <ol class="breadcrumb">
			 <li><a href="${base_path}/index"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="${base_path}/applications"><i class="fa fa-rocket"></i> Applications</a></li>
          </ol> 
        </section>

        <!-- Main content -->
        <section class="content">
          
	 	   <div class="box box-solid box-default">
	            <div class="box-header with-border">
	                <h3 class="box-title">Applications</h3>
	            </div><!-- /.box-header -->
	            <div class="box-body">  
	                <div class="btn-toolbar">
	                    <div class="btn-group">                                
	                        <a href="${base_path}/applications/new" class="btn btn-primary btn-xs"> <i class="fa fa-edit"></i> New</a>
	                    </div>
	                    <div class="btn-group">
	                        <button type="button" class="btn btn-danger btn-xs" onclick="Delete('app_table','${base_path}/applications/delete')"> <i class="fa fa-trash"></i> Delete</button>
	                    </div>                                
	                </div>
	                <br>
	                    <div class="table-responsive">                       
	                       <table class="table table-bordered table-striped footable" data-page-size="15" id="app_table">                                 
	                           <thead>
	                              <tr>
	                                 <th data-sort-ignore="true"><input type="checkbox" id="selectAllApps" onclick="checkAll(this.id,'app_table');" name="all" title="Click to select all rows"></th>
	                                 <th data-sort-initial="true">AppId</th>
	                                 <th>Name</th>
	                                 <th>Description</th>
	                                 <th>Active</th>
	                                 <th>Access Cotrol</th>
	                                 <th>Auth Scheme</th>                                                       
	                              </tr>
	                           </thead>      
	                           <tbody>
	                            <?dbax                                        
	                                DECLARE
	                                  l_link             VARCHAR2(1000);
	                                BEGIN                  
	                                  for c1 in (select * from table (tapi_wdx_applications.tt))
	                                  loop
	                                    l_link := '<a href="${base_path}/applications/edit/'|| c1.appid ||'">' || c1.appid || '</a>';
	                                    p('<tr>');
	                                        p('<td><input type="checkbox" value="'|| c1.appid||'"></td>');
	                                        p('<td>'|| l_link ||'</td>');
	                                        p('<td>'|| c1.Name ||'</td>');
	                                        p('<td>'|| c1.Description ||'</td>');                                                
	                                        IF c1.Active = 'Y'
	                                        THEN
	                                            p('<td><span class="label label-success">Active</span></td>');
	                                        ELSE
	                                            p('<td><span class="label label-danger">Inactive</span></td>');
	                                        END IF;
	                                        p('<td>'|| c1.access_control ||'</td>');
	                                        p('<td>'|| c1.auth_scheme ||'</td>');                                        
	                                    p('</tr>');                          
	                                  END LOOP;
	                                END; ?>
	                             </tbody>
	                        <tfoot class="hide-if-no-paging">
	                            <tr>
	                                <td colspan="7" class="text-center">
	                                    <ul class="pagination"></ul>
	                                </td>
	                            </tr>
	                        </tfoot>
	                     </table>
	                  </div>
	                  <div class="btn-toolbar">
	                    <div class="btn-group">
	                        <a href="${base_path}/applications/new" class="btn btn-primary btn-xs"> <i class="fa fa-edit"></i> New</a>
	                    </div>
	                    <div class="btn-group">                                
	                        <button type="button" class="btn btn-danger btn-xs" onclick="Delete('app_table','${base_path}/applications/delete')"> <i class="fa fa-trash"></i> Delete</button>
	                    </div>                                
	                </div>
	            </div><!-- /.box-body -->
	        </div> <!-- /.box -->        

        </section><!-- /.content -->
      </div><!-- /.content-wrapper -->

   
    <?dbax dbax_core.include('footer'); ?>    

	<!-- dbaxAdmin -->
    <script src="${resources_url}/plugins/dbaxadmin/dbaxadmin.js" type="text/javascript"></script>
    
    <!-- SweetAlert 2 -->
    <script src="${resources_url}/plugins/sweetalert2/sweetalert2.min.js" type="text/javascript"></script>

   <!--Footable -->
   <script src="${resources_url}/plugins/footable/footable.min.js" type="text/javascript"></script>
   <script src="${resources_url}/plugins/footable/footable.sort.min.js" type="text/javascript"></script>
   <script src="${resources_url}/plugins/footable/footable.paginate.min.js" type="text/javascript"></script>
    
    <script type="text/javascript">      
      //Init footable
      $(function () {
            $('#app_table').footable();
        });       
          
    </script>
    
  </body>
</HTML>